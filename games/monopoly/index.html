<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Monopoly | Game Arcade</title>
    <meta name="description" content="Play Monopoly online or locally with friends - up to 6 players">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="../../assets/css/normalize.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/monopoly.css">
    <link rel="icon" type="image/x-icon" href="../../favicon.ico" />
</head>
<body>
    <div class="game-wrapper">
        <!-- Setup Screen -->
        <div id="setup-screen" class="screen active">
            <div class="setup-container">
                <header class="setup-header">
                    <a href="../" class="back-link"><i class="fas fa-arrow-left"></i> Back to Games</a>
                    <h1>Monopoly</h1>
                    <p>Classic property trading game for 2-6 players</p>
                </header>

                <div class="mode-selection">
                    <h2>Select Game Mode</h2>
                    <div class="mode-buttons">
                        <button id="local-mode-btn" class="mode-btn active">
                            <i class="fas fa-users"></i>
                            <span>Local Play</span>
                            <small>Pass & play on one device</small>
                        </button>
                        <button id="online-mode-btn" class="mode-btn">
                            <i class="fas fa-globe"></i>
                            <span>Online Play</span>
                            <small>Play with friends remotely</small>
                        </button>
                    </div>
                </div>

                <!-- Local Mode Setup -->
                <div id="local-setup" class="setup-section">
                    <h3>Players</h3>
                    <div id="player-setup" class="player-setup">
                        <!-- Player inputs will be generated by JS -->
                    </div>
                    <div class="player-controls">
                        <button id="add-player-btn" class="btn btn-secondary">
                            <i class="fas fa-plus"></i> Add Player
                        </button>
                        <button id="remove-player-btn" class="btn btn-secondary">
                            <i class="fas fa-minus"></i> Remove Player
                        </button>
                    </div>
                    <button id="start-local-btn" class="btn btn-primary btn-large">
                        <i class="fas fa-play"></i> Start Game
                    </button>
                </div>

                <!-- Online Mode Setup -->
                <div id="online-setup" class="setup-section hidden">
                    <div class="online-options">
                        <button id="create-room-btn" class="btn btn-primary">
                            <i class="fas fa-plus-circle"></i> Create Room
                        </button>
                        <button id="join-room-btn" class="btn btn-secondary">
                            <i class="fas fa-sign-in-alt"></i> Join Room
                        </button>
                    </div>

                    <!-- Create Room Panel -->
                    <div id="create-room-panel" class="online-panel hidden">
                        <h3>Create a Room</h3>
                        <div class="form-group">
                            <label for="host-name">Your Name</label>
                            <input type="text" id="host-name" placeholder="Enter your name" maxlength="20">
                        </div>
                        <div class="form-group">
                            <label>Your Token</label>
                            <div class="token-selection" id="host-token-selection">
                                <!-- Tokens generated by JS -->
                            </div>
                        </div>
                        <button id="generate-room-btn" class="btn btn-primary">
                            <i class="fas fa-key"></i> Create Room
                        </button>
                        <div id="room-code-display" class="room-code-display hidden">
                            <p>Share this 12-character code with friends:</p>
                            <div class="room-code" id="room-code"></div>
                            <button id="copy-code-btn" class="btn btn-small">
                                <i class="fas fa-copy"></i> Copy Code
                            </button>
                            <div id="waiting-players" class="waiting-players">
                                <p>Waiting for players to join...</p>
                                <ul id="connected-players"></ul>
                            </div>
                            <button id="start-online-btn" class="btn btn-primary btn-large" disabled>
                                <i class="fas fa-play"></i> Start Game (2+ players needed)
                            </button>
                        </div>
                    </div>

                    <!-- Join Room Panel -->
                    <div id="join-room-panel" class="online-panel hidden">
                        <h3>Join a Room</h3>
                        <div class="form-group">
                            <label for="join-name">Your Name</label>
                            <input type="text" id="join-name" placeholder="Enter your name" maxlength="20">
                        </div>
                        <div class="form-group">
                            <label>Your Token</label>
                            <div class="token-selection" id="join-token-selection">
                                <!-- Tokens generated by JS -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="room-code-input">Room Code (12 characters)</label>
                            <input type="text" id="room-code-input" placeholder="Enter 12-character code" maxlength="12" style="text-transform: uppercase; letter-spacing: 2px;">
                        </div>
                        <button id="connect-room-btn" class="btn btn-primary">
                            <i class="fas fa-plug"></i> Join Room
                        </button>
                        <div id="join-status" class="join-status hidden">
                            <p id="join-status-text">Connecting...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-container">
                <!-- Game Header -->
                <header class="game-header">
                    <div class="header-left">
                        <button id="menu-btn" class="icon-btn" title="Menu">
                            <i class="fas fa-bars"></i>
                        </button>
                        <span class="game-title">Monopoly</span>
                    </div>
                    <div class="header-center">
                        <span id="current-turn-display" class="current-turn"></span>
                    </div>
                    <div class="header-right">
                        <button id="fullscreen-btn" class="icon-btn" title="Fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </header>

                <!-- Main Game Area -->
                <div class="game-main">
                    <!-- Player Panel (Left) -->
                    <aside class="player-panel" id="player-panel">
                        <!-- Player cards generated by JS -->
                    </aside>

                    <!-- Game Board -->
                    <div class="board-container">
                        <div class="board" id="game-board">
                            <!-- Board squares generated by JS -->
                        </div>

                        <!-- Center Area -->
                        <div class="board-center">
                            <div class="center-content">
                                <div class="dice-container">
                                    <div class="die" id="die1">
                                        <div class="die-face"></div>
                                    </div>
                                    <div class="die" id="die2">
                                        <div class="die-face"></div>
                                    </div>
                                </div>
                                <div id="dice-total" class="dice-total"></div>
                                <button id="roll-dice-btn" class="btn btn-primary">
                                    <i class="fas fa-dice"></i> Roll Dice
                                </button>
                                <button id="end-turn-btn" class="btn btn-secondary hidden">
                                    <i class="fas fa-forward"></i> End Turn
                                </button>
                            </div>
                            <div class="card-decks">
                                <div class="card-deck chance">
                                    <span>?</span>
                                    <small>Chance</small>
                                </div>
                                <div class="card-deck community">
                                    <span>C</span>
                                    <small>Community Chest</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Info Panel (Right) -->
                    <aside class="info-panel" id="info-panel">
                        <div class="game-log">
                            <h3><i class="fas fa-scroll"></i> Game Log</h3>
                            <ul id="game-log-list">
                                <!-- Log entries added by JS -->
                            </ul>
                        </div>
                    </aside>
                </div>
            </div>

            <!-- Game Menu Modal -->
            <div id="game-menu-modal" class="modal hidden">
                <div class="modal-content">
                    <h2>Game Menu</h2>
                    <button id="resume-game-btn" class="btn btn-primary">
                        <i class="fas fa-play"></i> Resume Game
                    </button>
                    <button id="trade-btn" class="btn btn-secondary">
                        <i class="fas fa-exchange-alt"></i> Trade
                    </button>
                    <button id="mortgage-btn" class="btn btn-secondary">
                        <i class="fas fa-university"></i> Manage Properties
                    </button>
                    <button id="quit-game-btn" class="btn btn-danger">
                        <i class="fas fa-sign-out-alt"></i> Quit Game
                    </button>
                </div>
            </div>

            <!-- Property Action Modal -->
            <div id="property-modal" class="modal hidden">
                <div class="modal-content property-modal-content">
                    <div class="property-card" id="modal-property-card">
                        <div class="property-header" id="modal-property-header">
                            <span id="modal-property-name">Property Name</span>
                        </div>
                        <div class="property-details">
                            <p class="property-price">Price: $<span id="modal-property-price">0</span></p>
                            <div class="rent-table">
                                <p>Rent: $<span id="modal-rent-base">0</span></p>
                                <p>With 1 House: $<span id="modal-rent-1">0</span></p>
                                <p>With 2 Houses: $<span id="modal-rent-2">0</span></p>
                                <p>With 3 Houses: $<span id="modal-rent-3">0</span></p>
                                <p>With 4 Houses: $<span id="modal-rent-4">0</span></p>
                                <p>With Hotel: $<span id="modal-rent-hotel">0</span></p>
                            </div>
                            <p class="house-cost">House Cost: $<span id="modal-house-cost">0</span></p>
                        </div>
                    </div>
                    <div class="property-actions" id="property-actions">
                        <button id="buy-property-btn" class="btn btn-primary">
                            <i class="fas fa-shopping-cart"></i> Buy Property
                        </button>
                        <button id="auction-property-btn" class="btn btn-secondary">
                            <i class="fas fa-gavel"></i> Auction
                        </button>
                        <button id="close-property-modal-btn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>
                </div>
            </div>

            <!-- Card Modal (Chance/Community Chest) -->
            <div id="card-modal" class="modal hidden">
                <div class="modal-content card-modal-content">
                    <div class="drawn-card" id="drawn-card">
                        <div class="card-type" id="card-type">Chance</div>
                        <div class="card-text" id="card-text">Card text here</div>
                    </div>
                    <button id="close-card-modal-btn" class="btn btn-primary">
                        <i class="fas fa-check"></i> OK
                    </button>
                </div>
            </div>

            <!-- Auction Modal -->
            <div id="auction-modal" class="modal hidden">
                <div class="modal-content auction-modal-content">
                    <h2>Auction</h2>
                    <div class="auction-property" id="auction-property-display"></div>
                    <div class="auction-info">
                        <p>Current Bid: $<span id="current-bid">0</span></p>
                        <p>Highest Bidder: <span id="highest-bidder">None</span></p>
                    </div>
                    <div class="auction-controls">
                        <input type="number" id="bid-amount" min="1" step="10" placeholder="Bid amount">
                        <button id="place-bid-btn" class="btn btn-primary">
                            <i class="fas fa-gavel"></i> Place Bid
                        </button>
                        <button id="pass-auction-btn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Pass
                        </button>
                    </div>
                </div>
            </div>

            <!-- Trade Modal -->
            <div id="trade-modal" class="modal hidden">
                <div class="modal-content trade-modal-content">
                    <h2><i class="fas fa-exchange-alt"></i> Trade</h2>
                    <div class="trade-panels">
                        <div class="trade-panel">
                            <h3>You Offer</h3>
                            <div class="trade-select">
                                <label>Money: $</label>
                                <input type="number" id="trade-offer-money" min="0" value="0">
                            </div>
                            <div class="trade-properties" id="trade-offer-properties">
                                <!-- Properties populated by JS -->
                            </div>
                        </div>
                        <div class="trade-panel">
                            <h3>You Want</h3>
                            <select id="trade-partner-select">
                                <!-- Players populated by JS -->
                            </select>
                            <div class="trade-select">
                                <label>Money: $</label>
                                <input type="number" id="trade-want-money" min="0" value="0">
                            </div>
                            <div class="trade-properties" id="trade-want-properties">
                                <!-- Properties populated by JS -->
                            </div>
                        </div>
                    </div>
                    <div class="trade-actions">
                        <button id="propose-trade-btn" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Propose Trade
                        </button>
                        <button id="cancel-trade-btn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>

            <!-- Trade Response Modal -->
            <div id="trade-response-modal" class="modal hidden">
                <div class="modal-content">
                    <h2>Trade Proposal</h2>
                    <div id="trade-proposal-details"></div>
                    <div class="trade-response-actions">
                        <button id="accept-trade-btn" class="btn btn-primary">
                            <i class="fas fa-check"></i> Accept
                        </button>
                        <button id="reject-trade-btn" class="btn btn-danger">
                            <i class="fas fa-times"></i> Reject
                        </button>
                    </div>
                </div>
            </div>

            <!-- Property Management Modal -->
            <div id="property-management-modal" class="modal hidden">
                <div class="modal-content property-management-content">
                    <h2><i class="fas fa-home"></i> Manage Properties</h2>
                    <div class="property-list" id="owned-properties-list">
                        <!-- Properties populated by JS -->
                    </div>
                    <button id="close-management-btn" class="btn btn-primary">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>

            <!-- Bankruptcy Modal -->
            <div id="bankruptcy-modal" class="modal hidden">
                <div class="modal-content">
                    <h2><i class="fas fa-exclamation-triangle"></i> Bankruptcy</h2>
                    <p id="bankruptcy-message">You don't have enough money!</p>
                    <p>You must mortgage properties or declare bankruptcy.</p>
                    <div class="bankruptcy-actions">
                        <button id="mortgage-to-pay-btn" class="btn btn-primary">
                            <i class="fas fa-university"></i> Manage Properties
                        </button>
                        <button id="declare-bankruptcy-btn" class="btn btn-danger">
                            <i class="fas fa-flag"></i> Declare Bankruptcy
                        </button>
                    </div>
                </div>
            </div>

            <!-- Game Over Modal -->
            <div id="gameover-modal" class="modal hidden">
                <div class="modal-content gameover-content">
                    <h2><i class="fas fa-trophy"></i> Game Over!</h2>
                    <div id="winner-display" class="winner-display">
                        <p>Winner:</p>
                        <h3 id="winner-name"></h3>
                    </div>
                    <div id="final-standings" class="final-standings">
                        <!-- Final standings populated by JS -->
                    </div>
                    <button id="new-game-btn" class="btn btn-primary btn-large">
                        <i class="fas fa-redo"></i> New Game
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="../assets/js/multiplayer.js"></script>
    <script src="assets/js/monopoly-data.js"></script>
    <script src="assets/js/monopoly-multiplayer.js"></script>
    <script src="assets/js/monopoly.js"></script>
</body>
</html>
